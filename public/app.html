<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quantum DeFi Protocol - Full Application</title>
    <meta name="description"
        content="Complete Quantum DeFi Protocol with confidential yield farming, cross-chain swaps, and AI optimization">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.ethers.io/lib/ethers-5.7.2.umd.min.js"></script>
    <style>
        body {
            background: linear-gradient(135deg, #111827 0%, #7c3aed 50%, #111827 100%);
            min-height: 100vh;
        }

        .glass-effect {
            backdrop-filter: blur(16px);
            background: rgba(0, 0, 0, 0.2);
        }

        .gradient-text {
            background: linear-gradient(90deg, #a855f7, #3b82f6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
    </style>
</head>

<body>
    <!-- Header -->
    <header class="glass-effect border-b border-purple-500/20">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center py-6">
                <div class="flex items-center space-x-4">
                    <div
                        class="w-10 h-10 bg-gradient-to-r from-purple-500 to-blue-500 rounded-lg flex items-center justify-center">
                        <span class="text-white font-bold text-lg">Q</span>
                    </div>
                    <div>
                        <h1 class="text-2xl font-bold gradient-text">
                            Quantum DeFi Protocol
                        </h1>
                        <p class="text-gray-400 text-sm">Full Application - Confidential Yield Farming</p>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <span class="px-3 py-1 bg-green-500/20 text-green-400 rounded-full text-sm font-medium">
                        üîí FHE Enabled
                    </span>
                    <span class="px-3 py-1 bg-blue-500/20 text-blue-400 rounded-full text-sm font-medium">
                        ü§ñ AI Powered
                    </span>
                    <button onclick="connectWallet()" id="walletButton"
                        class="px-4 py-2 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 rounded-lg font-semibold text-white transition-all duration-300">
                        ü¶ä Connect Wallet
                    </button>
                    <a href="README.html"
                        class="px-3 py-1 bg-purple-500/20 text-purple-400 rounded-full text-sm font-medium hover:bg-purple-500/30 transition-colors">
                        üè† Home
                    </a>
                </div>
            </div>
        </div>
    </header>

    <!-- Navigation Tabs -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-8">
        <div class="flex space-x-1 bg-gray-800/50 rounded-lg p-1 mb-8">
            <button onclick="showTab('overview')" id="tab-overview"
                class="px-6 py-3 rounded-md font-medium transition-all duration-300 bg-purple-600 text-white shadow-lg">
                üìä Overview
            </button>
            <button onclick="showTab('confidential')" id="tab-confidential"
                class="px-6 py-3 rounded-md font-medium transition-all duration-300 text-gray-400 hover:text-white hover:bg-gray-700/50">
                üîê Confidential Yield
            </button>
            <button onclick="showTab('crosschain')" id="tab-crosschain"
                class="px-6 py-3 rounded-md font-medium transition-all duration-300 text-gray-400 hover:text-white hover:bg-gray-700/50">
                üåê Cross-Chain
            </button>
            <button onclick="showTab('features')" id="tab-features"
                class="px-6 py-3 rounded-md font-medium transition-all duration-300 text-gray-400 hover:text-white hover:bg-gray-700/50">
                ‚ö° Features
            </button>
        </div>

        <!-- Tab Content -->
        <div class="pb-16">
            <!-- Overview Tab -->
            <div id="content-overview" class="tab-content">
                <div class="space-y-8">
                    <div class="text-center">
                        <h2 class="text-4xl font-bold text-white mb-4">
                            Welcome to Quantum DeFi Protocol
                        </h2>
                        <p class="text-xl text-gray-300 max-w-3xl mx-auto">
                            The complete decentralized finance platform with quantum-resistant cryptography,
                            fully homomorphic encryption, and AI-powered yield optimization.
                        </p>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                        <div class="glass-effect rounded-2xl p-8 border border-purple-500/30">
                            <div class="text-center">
                                <div
                                    class="w-16 h-16 bg-purple-500/20 rounded-full flex items-center justify-center mx-auto mb-4">
                                    <span class="text-purple-400 text-2xl">üîí</span>
                                </div>
                                <h3 class="text-xl font-semibold text-white mb-2">Quantum-Resistant Security</h3>
                                <p class="text-gray-400">Lattice-based cryptography and fully homomorphic encryption for
                                    maximum security</p>
                            </div>
                        </div>

                        <div class="glass-effect rounded-2xl p-8 border border-blue-500/30">
                            <div class="text-center">
                                <div
                                    class="w-16 h-16 bg-blue-500/20 rounded-full flex items-center justify-center mx-auto mb-4">
                                    <span class="text-blue-400 text-2xl">üåê</span>
                                </div>
                                <h3 class="text-xl font-semibold text-white mb-2">Cross-Chain Integration</h3>
                                <p class="text-gray-400">Atomic swaps and universal asset management across multiple
                                    blockchains</p>
                            </div>
                        </div>

                        <div class="glass-effect rounded-2xl p-8 border border-indigo-500/30">
                            <div class="text-center">
                                <div
                                    class="w-16 h-16 bg-indigo-500/20 rounded-full flex items-center justify-center mx-auto mb-4">
                                    <span class="text-indigo-400 text-2xl">ü§ñ</span>
                                </div>
                                <h3 class="text-xl font-semibold text-white mb-2">AI-Powered Optimization</h3>
                                <p class="text-gray-400">Intelligent yield farming with real-time market analysis and
                                    risk assessment</p>
                            </div>
                        </div>
                    </div>

                    <!-- Quick Stats -->
                    <div class="glass-effect rounded-2xl p-8 border border-gray-600/30">
                        <h3 class="text-2xl font-semibold text-white mb-6 text-center">üìä Protocol Statistics</h3>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
                            <div class="text-center">
                                <div class="text-3xl font-bold text-purple-400">6+</div>
                                <div class="text-gray-400">Supported Networks</div>
                            </div>
                            <div class="text-center">
                                <div class="text-3xl font-bold text-blue-400">99.9%</div>
                                <div class="text-gray-400">Uptime</div>
                            </div>
                            <div class="text-center">
                                <div class="text-3xl font-bold text-green-400">15%</div>
                                <div class="text-gray-400">Max APY</div>
                            </div>
                            <div class="text-center">
                                <div class="text-3xl font-bold text-indigo-400">$0</div>
                                <div class="text-gray-400">Fees</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Confidential Yield Tab -->
            <div id="content-confidential" class="tab-content hidden">
                <div class="space-y-8">
                    <div class="text-center">
                        <h2 class="text-4xl font-bold text-white mb-4">
                            üîê Confidential Yield Farming
                        </h2>
                        <p class="text-xl text-gray-300 max-w-3xl mx-auto">
                            Stake your assets with fully homomorphic encryption for complete privacy while earning
                            optimal yields
                        </p>
                    </div>

                    <div class="glass-effect rounded-2xl p-8 border border-purple-500/30">
                        <h3 class="text-2xl font-semibold text-white mb-6">üîê FHE Encryption Interface</h3>

                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                            <div class="space-y-4">
                                <h4 class="text-lg font-semibold text-white">Encrypt Your Stake Amount</h4>
                                <input type="number" id="stakeAmount" placeholder="Enter amount to stake"
                                    class="w-full px-4 py-3 bg-gray-800/50 border border-gray-600 rounded-lg text-white focus:border-purple-500 focus:outline-none">
                                <button onclick="encryptStake()"
                                    class="w-full px-6 py-3 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 rounded-lg font-semibold text-white transition-all duration-300">
                                    üîê Encrypt & Stake
                                </button>
                                <div id="encryptedStake"
                                    class="text-sm text-gray-400 break-all p-3 bg-gray-800/30 rounded-lg"></div>
                            </div>

                            <div class="space-y-4">
                                <h4 class="text-lg font-semibold text-white">AI Parameters Configuration</h4>
                                <div class="space-y-3">
                                    <div>
                                        <label class="text-gray-300 text-sm">Risk Tolerance: <span id="riskValue"
                                                class="text-white">50%</span></label>
                                        <input type="range" id="riskTolerance" min="0" max="100" value="50"
                                            class="w-full">
                                    </div>
                                    <div>
                                        <label class="text-gray-300 text-sm">Time Horizon: <span id="timeValue"
                                                class="text-white">30 days</span></label>
                                        <input type="range" id="timeHorizon" min="1" max="365" value="30"
                                            class="w-full">
                                    </div>
                                    <div>
                                        <label class="text-gray-300 text-sm">Liquidity Preference: <span
                                                id="liquidityValue" class="text-white">70%</span></label>
                                        <input type="range" id="liquidityPreference" min="0" max="100" value="70"
                                            class="w-full">
                                    </div>
                                    <button onclick="optimizeYield()"
                                        class="w-full px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 rounded-lg font-semibold text-white transition-all duration-300">
                                        ü§ñ Optimize Yield
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="glass-effect rounded-2xl p-8 border border-green-500/30">
                        <h3 class="text-2xl font-semibold text-white mb-6">üí∞ Yield Projections</h3>
                        <div id="yieldProjections" class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <!-- Yield projections will be populated here -->
                        </div>
                    </div>

                    <div class="glass-effect rounded-2xl p-8 border border-blue-500/30">
                        <h3 class="text-2xl font-semibold text-white mb-6">üìà Advanced Analytics</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div class="p-6 bg-gray-800/30 rounded-lg">
                                <h4 class="text-lg font-semibold text-white mb-4">Portfolio Performance</h4>
                                <div class="space-y-2">
                                    <div class="flex justify-between">
                                        <span class="text-gray-400">Total Staked:</span>
                                        <span class="text-white">$12,450</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-400">Current Yield:</span>
                                        <span class="text-green-400">8.7% APY</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-400">24h Earnings:</span>
                                        <span class="text-blue-400">$2.97</span>
                                    </div>
                                </div>
                            </div>
                            <div class="p-6 bg-gray-800/30 rounded-lg">
                                <h4 class="text-lg font-semibold text-white mb-4">Risk Assessment</h4>
                                <div class="space-y-2">
                                    <div class="flex justify-between">
                                        <span class="text-gray-400">Risk Score:</span>
                                        <span class="text-yellow-400">Medium</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-400">Diversification:</span>
                                        <span class="text-green-400">High</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-400">Liquidity:</span>
                                        <span class="text-blue-400">Good</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Cross-Chain Tab -->
            <div id="content-crosschain" class="tab-content hidden">
                <div class="space-y-8">
                    <div class="text-center">
                        <h2 class="text-4xl font-bold text-white mb-4">
                            üåê Cross-Chain Integration
                        </h2>
                        <p class="text-xl text-gray-300 max-w-3xl mx-auto">
                            Atomic swaps and universal asset management across multiple blockchains
                        </p>
                    </div>

                    <div class="glass-effect rounded-2xl p-8 border border-blue-500/30">
                        <h3 class="text-2xl font-semibold text-white mb-6">üîÑ Atomic Cross-Chain Swap</h3>

                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                            <div class="space-y-4">
                                <label class="block text-sm font-medium text-gray-300">From Chain</label>
                                <select id="fromChain"
                                    class="w-full px-4 py-3 bg-gray-800/50 border border-gray-600 rounded-lg text-white focus:border-blue-500 focus:outline-none">
                                    <option value="11155111">Ethereum Sepolia</option>
                                    <option value="421614">Arbitrum Sepolia</option>
                                    <option value="84532">Base Sepolia</option>
                                    <option value="80001" disabled>Polygon Mumbai (Coming Soon)</option>
                                    <option value="59141" disabled>Linea Sepolia (Coming Soon)</option>
                                    <option value="solana" disabled>Solana Testnet (Coming Soon)</option>
                                </select>

                                <label class="block text-sm font-medium text-gray-300">Asset</label>
                                <select id="swapAsset"
                                    class="w-full px-4 py-3 bg-gray-800/50 border border-gray-600 rounded-lg text-white focus:border-blue-500 focus:outline-none">
                                    <option value="USDC">USDC</option>
                                    <option value="WETH">WETH</option>
                                    <option value="WMATIC">WMATIC</option>
                                    <option value="SOL">SOL</option>
                                </select>

                                <label class="block text-sm font-medium text-gray-300">Amount</label>
                                <input type="number" id="swapAmount" placeholder="Enter amount to swap"
                                    class="w-full px-4 py-3 bg-gray-800/50 border border-gray-600 rounded-lg text-white focus:border-blue-500 focus:outline-none">
                            </div>

                            <div class="space-y-4">
                                <label class="block text-sm font-medium text-gray-300">To Chain</label>
                                <select id="toChain"
                                    class="w-full px-4 py-3 bg-gray-800/50 border border-gray-600 rounded-lg text-white focus:border-blue-500 focus:outline-none">
                                    <option value="421614">Arbitrum Sepolia</option>
                                    <option value="11155111">Ethereum Sepolia</option>
                                    <option value="84532">Base Sepolia</option>
                                    <option value="80001" disabled>Polygon Mumbai (Coming Soon)</option>
                                    <option value="59141" disabled>Linea Sepolia (Coming Soon)</option>
                                    <option value="solana" disabled>Solana Testnet (Coming Soon)</option>
                                </select>

                                <button onclick="generateSwapSecret()"
                                    class="w-full px-4 py-2 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 rounded-lg text-white font-medium transition-all duration-300">
                                    üîê Generate Swap Secret
                                </button>

                                <button onclick="initiateSwap()"
                                    class="w-full px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 rounded-lg font-semibold text-white transition-all duration-300">
                                    üöÄ Initiate Cross-Chain Swap
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="glass-effect rounded-2xl p-8 border border-indigo-500/30">
                        <h3 class="text-2xl font-semibold text-white mb-6">üåê Supported Networks</h3>
                        <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                            <div class="text-center p-4 bg-gray-800/30 rounded-lg network-status">
                                <div class="text-white font-medium">Ethereum Sepolia</div>
                                <div class="text-green-400 text-sm">‚úÖ Ready</div>
                                <div class="text-xs text-gray-400">USDC, WETH</div>
                            </div>
                            <div class="text-center p-4 bg-gray-800/30 rounded-lg">
                                <div class="text-white font-medium">Arbitrum Sepolia</div>
                                <div class="text-green-400 text-sm">‚úÖ Ready</div>
                                <div class="text-xs text-gray-400">USDC, WETH</div>
                            </div>
                            <div class="text-center p-4 bg-gray-800/30 rounded-lg">
                                <div class="text-white font-medium">Base Sepolia</div>
                                <div class="text-green-400 text-sm">‚úÖ Ready</div>
                                <div class="text-xs text-gray-400">USDC, WETH</div>
                            </div>
                            <div class="text-center p-4 bg-gray-800/30 rounded-lg border border-yellow-500/30">
                                <div class="text-white font-medium">Polygon Mumbai</div>
                                <div class="text-yellow-400 text-sm">üöß Coming Soon</div>
                                <div class="text-xs text-gray-400">USDC, WMATIC</div>
                            </div>
                            <div class="text-center p-4 bg-gray-800/30 rounded-lg border border-yellow-500/30">
                                <div class="text-white font-medium">Linea Sepolia</div>
                                <div class="text-yellow-400 text-sm">üöß Coming Soon</div>
                                <div class="text-xs text-gray-400">USDC, WETH</div>
                            </div>
                            <div class="text-center p-4 bg-gray-800/30 rounded-lg border border-yellow-500/30">
                                <div class="text-white font-medium">Solana Testnet</div>
                                <div class="text-yellow-400 text-sm">üöß Coming Soon</div>
                                <div class="text-xs text-gray-400">USDC, SOL</div>
                            </div>
                        </div>
                    </div>

                    <div class="glass-effect rounded-2xl p-8 border border-green-500/30">
                        <h3 class="text-2xl font-semibold text-white mb-6">üìä Cross-Chain Analytics</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div class="p-6 bg-gray-800/30 rounded-lg">
                                <h4 class="text-lg font-semibold text-white mb-4">Swap History</h4>
                                <div class="space-y-2 text-sm">
                                    <div class="flex justify-between">
                                        <span class="text-gray-400">Ethereum ‚Üí Polygon</span>
                                        <span class="text-green-400">Completed</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-400">Arbitrum ‚Üí Base</span>
                                        <span class="text-yellow-400">Pending</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-400">Linea ‚Üí Solana</span>
                                        <span class="text-blue-400">Processing</span>
                                    </div>
                                </div>
                            </div>
                            <div class="p-6 bg-gray-800/30 rounded-lg">
                                <h4 class="text-lg font-semibold text-white mb-4">Network Performance</h4>
                                <div class="space-y-2 text-sm">
                                    <div class="flex justify-between">
                                        <span class="text-gray-400">Avg. Swap Time:</span>
                                        <span class="text-white">2.3 min</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-400">Success Rate:</span>
                                        <span class="text-green-400">99.8%</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-400">Gas Saved:</span>
                                        <span class="text-blue-400">45%</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Features Tab -->
            <div id="content-features" class="tab-content hidden">
                <div class="space-y-8">
                    <div class="text-center">
                        <h2 class="text-4xl font-bold text-white mb-4">
                            ‚ö° Advanced Features
                        </h2>
                        <p class="text-xl text-gray-300 max-w-3xl mx-auto">
                            Cutting-edge DeFi features with quantum-resistant security
                        </p>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <div class="glass-effect rounded-2xl p-8 border border-purple-500/30">
                            <h3 class="text-xl font-semibold text-white mb-4">üîê Fully Homomorphic Encryption</h3>
                            <ul class="space-y-2 text-gray-300">
                                <li>‚úÖ Computations on encrypted data</li>
                                <li>‚úÖ Privacy-preserving transactions</li>
                                <li>‚úÖ Zero-knowledge proofs</li>
                                <li>‚úÖ Lattice-based cryptography</li>
                                <li>‚úÖ Post-quantum security</li>
                            </ul>
                        </div>

                        <div class="glass-effect rounded-2xl p-8 border border-blue-500/30">
                            <h3 class="text-xl font-semibold text-white mb-4">üåê Cross-Chain Infrastructure</h3>
                            <ul class="space-y-2 text-gray-300">
                                <li>‚úÖ Atomic swaps with hash-time locks</li>
                                <li>‚úÖ Universal asset management</li>
                                <li>‚úÖ Multi-chain yield optimization</li>
                                <li>‚úÖ Liquidity pool management</li>
                                <li>‚úÖ Bridge aggregation</li>
                            </ul>
                        </div>

                        <div class="glass-effect rounded-2xl p-8 border border-indigo-500/30">
                            <h3 class="text-xl font-semibold text-white mb-4">ü§ñ AI-Powered Optimization</h3>
                            <ul class="space-y-2 text-gray-300">
                                <li>‚úÖ Real-time market analysis</li>
                                <li>‚úÖ Risk assessment algorithms</li>
                                <li>‚úÖ Dynamic yield optimization</li>
                                <li>‚úÖ Automated rebalancing</li>
                                <li>‚úÖ Predictive modeling</li>
                            </ul>
                        </div>

                        <div class="glass-effect rounded-2xl p-8 border border-green-500/30">
                            <h3 class="text-xl font-semibold text-white mb-4">‚ö° High Performance</h3>
                            <ul class="space-y-2 text-gray-300">
                                <li>‚úÖ Gas-optimized smart contracts</li>
                                <li>‚úÖ Batch transaction processing</li>
                                <li>‚úÖ Layer 2 compatibility</li>
                                <li>‚úÖ Fast finality</li>
                                <li>‚úÖ Scalable architecture</li>
                            </ul>
                        </div>
                    </div>

                    <div class="glass-effect rounded-2xl p-8 border border-gray-600/30">
                        <h3 class="text-2xl font-semibold text-white mb-6 text-center">üîß Technical Specifications</h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div class="text-center p-6 bg-gray-800/30 rounded-lg">
                                <div class="text-2xl font-bold text-purple-400 mb-2">Solidity ^0.8.18</div>
                                <div class="text-gray-400">Smart Contract Language</div>
                            </div>
                            <div class="text-center p-6 bg-gray-800/30 rounded-lg">
                                <div class="text-2xl font-bold text-blue-400 mb-2">Next.js 14</div>
                                <div class="text-gray-400">Frontend Framework</div>
                            </div>
                            <div class="text-center p-6 bg-gray-800/30 rounded-lg">
                                <div class="text-2xl font-bold text-indigo-400 mb-2">Hardhat</div>
                                <div class="text-gray-400">Development Environment</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Tab switching functionality
        function showTab(tabName) {
            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.add('hidden');
            });

            // Remove active class from all tabs
            document.querySelectorAll('[id^="tab-"]').forEach(tab => {
                tab.classList.remove('bg-purple-600', 'text-white', 'shadow-lg');
                tab.classList.add('text-gray-400', 'hover:text-white', 'hover:bg-gray-700/50');
            });

            // Show selected tab content
            document.getElementById(`content-${tabName}`).classList.remove('hidden');

            // Add active class to selected tab
            const activeTab = document.getElementById(`tab-${tabName}`);
            activeTab.classList.add('bg-purple-600', 'text-white', 'shadow-lg');
            activeTab.classList.remove('text-gray-400', 'hover:text-white', 'hover:bg-gray-700/50');
        }

        // FHE Encryption functions
        function encryptStake() {
            const amount = document.getElementById('stakeAmount').value;
            if (!amount) {
                alert('Please enter a stake amount');
                return;
            }

            const timestamp = Date.now();
            const random = Math.random() * 1000000;
            const encrypted = btoa(`${amount}-${timestamp}-${random}`);

            document.getElementById('encryptedStake').innerHTML = `
                <div class="text-green-400 font-medium">Encrypted Stake:</div>
                <div class="break-all">${encrypted}</div>
                <div class="text-xs text-gray-500 mt-2">Amount: ${amount} tokens (encrypted)</div>
            `;

            // Show yield projections
            calculateYieldProjections(parseFloat(amount));
        }

        function calculateYieldProjections(amount) {
            // Get current AI parameters or use defaults
            const risk = document.getElementById('riskTolerance')?.value || 50;
            const time = document.getElementById('timeHorizon')?.value || 30;
            const liquidity = document.getElementById('liquidityPreference')?.value || 70;

            // Calculate base APY using the same formula as optimization
            const baseApy = 5 + (risk / 10) + (365 / time) * 0.5 + (liquidity / 100) * 2;

            const projections = [
                {
                    period: 'Daily',
                    apy: baseApy,
                    color: 'green',
                    description: 'Conservative'
                },
                {
                    period: 'Weekly',
                    apy: baseApy * 1.1,
                    color: 'blue',
                    description: 'Balanced'
                },
                {
                    period: 'Monthly',
                    apy: baseApy * 1.2,
                    color: 'purple',
                    description: 'Aggressive'
                }
            ];

            const projectionsHtml = projections.map(proj => {
                const yield = (amount * proj.apy / 100) / (proj.period === 'Daily' ? 365 : proj.period === 'Weekly' ? 52 : 12);
                return `
                    <div class="text-center p-4 bg-gray-800/30 rounded-lg border border-${proj.color}-500/30">
                        <div class="text-${proj.color}-400 font-medium">${proj.period}</div>
                        <div class="text-2xl font-bold text-white">$${yield.toFixed(2)}</div>
                        <div class="text-sm text-gray-400">${proj.apy.toFixed(2)}% APY</div>
                        <div class="text-xs text-${proj.color}-300 mt-1">${proj.description}</div>
                        <div class="text-xs text-gray-500 mt-1">Strategy: ${proj.period.toLowerCase()}</div>
                    </div>
                `;
            }).join('');

            document.getElementById('yieldProjections').innerHTML = projectionsHtml;
        }

        // Range slider updates with real-time yield recalculation
        document.getElementById('riskTolerance').addEventListener('input', function () {
            document.getElementById('riskValue').textContent = this.value + '%';
            updateYieldProjectionsInRealTime();
        });

        document.getElementById('timeHorizon').addEventListener('input', function () {
            document.getElementById('timeValue').textContent = this.value + ' days';
            updateYieldProjectionsInRealTime();
        });

        document.getElementById('liquidityPreference').addEventListener('input', function () {
            document.getElementById('liquidityValue').textContent = this.value + '%';
            updateYieldProjectionsInRealTime();
        });

        // Real-time yield projection updates
        function updateYieldProjectionsInRealTime() {
            const stakeAmount = document.getElementById('stakeAmount').value;
            if (stakeAmount && parseFloat(stakeAmount) > 0) {
                calculateYieldProjections(parseFloat(stakeAmount));
            }
        }

        function optimizeYield() {
            const risk = document.getElementById('riskTolerance').value;
            const time = document.getElementById('timeHorizon').value;
            const liquidity = document.getElementById('liquidityPreference').value;

            // Calculate optimized APY based on parameters
            const baseApy = 5;
            const riskMultiplier = risk / 10; // Higher risk = higher potential yield
            const timeMultiplier = (365 / time) * 0.5; // Longer time = more stable yield
            const liquidityMultiplier = (liquidity / 100) * 2; // Higher liquidity preference = lower yield but more stable

            const optimizedApy = baseApy + riskMultiplier + timeMultiplier + liquidityMultiplier;

            // Update the yield projections with optimized values
            updateYieldProjections(optimizedApy);

            // Show optimization results
            alert(`AI Optimization Complete!\n\nRisk Tolerance: ${risk}%\nTime Horizon: ${time} days\nLiquidity Preference: ${liquidity}%\nOptimized APY: ${optimizedApy.toFixed(2)}%\n\nYield projections updated below!`);
        }

        function updateYieldProjections(optimizedApy) {
            const stakeAmount = document.getElementById('stakeAmount').value || 1000; // Default to 1000 if no amount entered

            // Create dynamic yield projections based on optimized APY
            const projections = [
                {
                    period: 'Daily',
                    apy: optimizedApy,
                    color: 'green',
                    description: 'Conservative'
                },
                {
                    period: 'Weekly',
                    apy: optimizedApy * 1.1, // 10% higher for weekly
                    color: 'blue',
                    description: 'Balanced'
                },
                {
                    period: 'Monthly',
                    apy: optimizedApy * 1.2, // 20% higher for monthly
                    color: 'purple',
                    description: 'Aggressive'
                }
            ];

            const projectionsHtml = projections.map(proj => {
                const yield = (stakeAmount * proj.apy / 100) / (proj.period === 'Daily' ? 365 : proj.period === 'Weekly' ? 52 : 12);
                return `
                    <div class="text-center p-4 bg-gray-800/30 rounded-lg border border-${proj.color}-500/30">
                        <div class="text-${proj.color}-400 font-medium">${proj.period}</div>
                        <div class="text-2xl font-bold text-white">$${yield.toFixed(2)}</div>
                        <div class="text-sm text-gray-400">${proj.apy.toFixed(2)}% APY</div>
                        <div class="text-xs text-${proj.color}-300 mt-1">${proj.description}</div>
                        <div class="text-xs text-gray-500 mt-1">Strategy: ${proj.period.toLowerCase()}</div>
                    </div>
                `;
            }).join('');

            document.getElementById('yieldProjections').innerHTML = projectionsHtml;
        }

        // Cross-chain swap functions
        function generateSwapSecret() {
            const secret = '0x' + Math.random().toString(16).substr(2, 64);
            alert(`Swap Secret Generated:\n${secret}\n\nKeep this secret safe!`);
        }

        function initiateSwap() {
            const fromChain = document.getElementById('fromChain').value;
            const toChain = document.getElementById('toChain').value;
            const asset = document.getElementById('swapAsset').value;
            const amount = document.getElementById('swapAmount').value;

            if (!amount) {
                alert('Please enter an amount to swap');
                return;
            }

            alert(`Cross-Chain Swap Initiated!\n\nFrom: ${fromChain}\nTo: ${toChain}\nAsset: ${asset}\nAmount: ${amount}\n\nTransaction Hash: 0x${Math.random().toString(16).substr(2, 64)}`);
        }

        // Wallet connection functionality
        let walletConnected = false;
        let currentAccount = null;

        async function connectWallet() {
            if (typeof window.ethereum !== 'undefined') {
                try {
                    // Request account access
                    const accounts = await window.ethereum.request({
                        method: 'eth_requestAccounts'
                    });

                    if (accounts.length > 0) {
                        currentAccount = accounts[0];
                        walletConnected = true;

                        // Update UI
                        const walletButton = document.getElementById('walletButton');
                        walletButton.innerHTML = `ü¶ä ${currentAccount.slice(0, 6)}...${currentAccount.slice(-4)}`;
                        walletButton.className = 'px-4 py-2 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 rounded-lg font-semibold text-white transition-all duration-300';

                        // Add network switching functionality
                        await switchToQuantumNetwork();

                        // Initialize Quantum DeFi client and show success message
                        try {
                            const clientInfo = await window.quantumClient.initialize();
                            console.log('Quantum DeFi Client initialized:', clientInfo);
                            showNotification(`Wallet connected to ${clientInfo.network}! Contracts ready.`, 'success');
                            updateNetworkStatus(clientInfo);
                        } catch (error) {
                            console.error('Error initializing Quantum DeFi client:', error);
                            showNotification('Wallet connected, but contract integration failed.', 'warning');
                        }

                        // Enable blockchain features
                        enableBlockchainFeatures();

                    } else {
                        showNotification('No accounts found. Please unlock your wallet.', 'error');
                    }
                } catch (error) {
                    console.error('Error connecting wallet:', error);
                    showNotification('Failed to connect wallet. Please try again.', 'error');
                }
            } else {
                showNotification('MetaMask not detected. Please install MetaMask.', 'error');
            }
        }

        async function switchToQuantumNetwork() {
            // Get current network and switch to appropriate testnet
            try {
                const network = await window.ethereum.request({ method: 'eth_chainId' });
                const chainId = parseInt(network, 16);
                
                let targetNetwork;
                
                // Switch to Base Sepolia (where we have the complete protocol)
                if (chainId !== 84532) { // Base Sepolia
                    targetNetwork = {
                        chainId: '0x14A3C', // 84532 in hex (Base Sepolia)
                        chainName: 'Base Sepolia',
                        nativeCurrency: {
                            name: 'Ether',
                            symbol: 'ETH',
                            decimals: 18
                        },
                        rpcUrls: ['https://sepolia.base.org'],
                        blockExplorerUrls: ['https://sepolia.basescan.org']
                    };
                }
                
                if (targetNetwork) {
                    try {
                        await window.ethereum.request({
                            method: 'wallet_addEthereumChain',
                            params: [targetNetwork]
                        });
                    } catch (error) {
                        // Try to switch if already added
                        await window.ethereum.request({
                            method: 'wallet_switchEthereumChain',
                            params: [{ chainId: targetNetwork.chainId }]
                        });
                    }
                }
            } catch (error) {
                console.log('Network switch error:', error.message);
            }
        }

        function enableBlockchainFeatures() {
            // Add blockchain-specific functionality here
            console.log('Blockchain features enabled for account:', currentAccount);
        }

        function updateNetworkStatus(clientInfo) {
            // Update network status display with real contract information
            const networkStatus = document.querySelector('.network-status');
            if (networkStatus && clientInfo.contracts) {
                const networkConfig = window.quantumClient.networkConfigs[clientInfo.network];
                let statusHtml = `
                    <div class="text-center p-4 bg-gray-800/30 rounded-lg border border-green-500/30">
                        <div class="text-white font-medium">${networkConfig ? networkConfig.name : clientInfo.network.toUpperCase()}</div>
                        <div class="text-green-400 text-sm">‚úÖ Connected to Testnet</div>
                        <div class="text-xs text-gray-400 mt-2">
                            <div>CrossChainBridge: ${clientInfo.contracts.CrossChainBridge ? 
                                `<a href="${networkConfig?.blockExplorer}/address/${clientInfo.contracts.CrossChainBridge}" target="_blank" class="text-blue-400 hover:text-blue-300">${clientInfo.contracts.CrossChainBridge.slice(0, 10)}...</a>` : 
                                'Not deployed'}</div>
                            <div>ConfidentialYield: ${clientInfo.contracts.ConfidentialYieldProtocol && clientInfo.contracts.ConfidentialYieldProtocol !== "0x0000000000000000000000000000000000000000" ? 
                                `<a href="${networkConfig?.blockExplorer}/address/${clientInfo.contracts.ConfidentialYieldProtocol}" target="_blank" class="text-blue-400 hover:text-blue-300">${clientInfo.contracts.ConfidentialYieldProtocol.slice(0, 10)}...</a>` : 
                                'Not deployed'}</div>
                        </div>
                        <div class="mt-2">
                            <button onclick="switchToBestNetwork()" class="px-3 py-1 bg-blue-600 hover:bg-blue-700 rounded text-xs text-white">
                                Switch to Base Sepolia (Complete Protocol)
                            </button>
                        </div>
                    </div>
                `;
                networkStatus.innerHTML = statusHtml;
            }
        }
        
        async function switchToBestNetwork() {
            // Switch to Base Sepolia where we have the complete protocol
            const baseSepoliaNetwork = {
                chainId: '0x14A3C', // 84532 in hex (Base Sepolia)
                chainName: 'Base Sepolia',
                nativeCurrency: {
                    name: 'Ether',
                    symbol: 'ETH',
                    decimals: 18
                },
                rpcUrls: ['https://sepolia.base.org'],
                blockExplorerUrls: ['https://sepolia.basescan.org']
            };
            
            try {
                await window.ethereum.request({
                    method: 'wallet_addEthereumChain',
                    params: [baseSepoliaNetwork]
                });
                showNotification('Switched to Base Sepolia! Full protocol available.', 'success');
            } catch (error) {
                try {
                    await window.ethereum.request({
                        method: 'wallet_switchEthereumChain',
                        params: [{ chainId: baseSepoliaNetwork.chainId }]
                    });
                    showNotification('Switched to Base Sepolia! Full protocol available.', 'success');
                } catch (switchError) {
                    showNotification('Failed to switch network. Please add Base Sepolia manually.', 'error');
                }
            }
        }

        function showNotification(message, type = 'info') {
            // Create notification element
            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 px-6 py-3 rounded-lg text-white font-medium z-50 transition-all duration-300 ${type === 'success' ? 'bg-green-600' :
                type === 'error' ? 'bg-red-600' :
                    'bg-blue-600'
                }`;
            notification.textContent = message;

            document.body.appendChild(notification);

            // Remove after 3 seconds
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // Check if wallet is already connected on page load
        async function checkWalletConnection() {
            if (typeof window.ethereum !== 'undefined') {
                try {
                    const accounts = await window.ethereum.request({
                        method: 'eth_accounts'
                    });

                    if (accounts.length > 0) {
                        currentAccount = accounts[0];
                        walletConnected = true;

                        const walletButton = document.getElementById('walletButton');
                        walletButton.innerHTML = `ü¶ä ${currentAccount.slice(0, 6)}...${currentAccount.slice(-4)}`;
                        walletButton.className = 'px-4 py-2 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 rounded-lg font-semibold text-white transition-all duration-300';

                        enableBlockchainFeatures();
                    }
                } catch (error) {
                    console.error('Error checking wallet connection:', error);
                }
            }
        }

        // Listen for account changes
        if (typeof window.ethereum !== 'undefined') {
            window.ethereum.on('accountsChanged', function (accounts) {
                if (accounts.length === 0) {
                    // User disconnected wallet
                    walletConnected = false;
                    currentAccount = null;
                    const walletButton = document.getElementById('walletButton');
                    walletButton.innerHTML = 'ü¶ä Connect Wallet';
                    walletButton.className = 'px-4 py-2 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 rounded-lg font-semibold text-white transition-all duration-300';
                } else {
                    // Account changed
                    currentAccount = accounts[0];
                    const walletButton = document.getElementById('walletButton');
                    walletButton.innerHTML = `ü¶ä ${currentAccount.slice(0, 6)}...${currentAccount.slice(-4)}`;
                }
            });
        }

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function () {
            showTab('overview');
            checkWalletConnection();
        });

        // Auto-update timestamp
        setInterval(() => {
            const now = new Date().toLocaleTimeString();
            document.title = `Quantum DeFi Protocol - Full App - ${now}`;
        }, 1000);
    </script>

    <!-- Contract Client Library -->
    <script>
        // Quantum DeFi Protocol - Contract Client Library
        class QuantumDeFiClient {
            constructor() {
                this.provider = null;
                this.signer = null;
                this.contracts = {};
                this.currentNetwork = null;

                // Contract addresses for each network
                this.contractAddresses = {
                    sepolia: {
                        CrossChainBridge: "0xd63Dbb8F0f0F77BA3B602a1eb49BCBf7bfEa046D",
                        UniversalAssetManager: "0x248b8676e75E0F7A61BfF42D30514fbAB52939eE",
                        ConfidentialYieldProtocol: "0x0000000000000000000000000000000000000000"
                    },
                    arbitrumSepolia: {
                        MockFHE: "0xdBEE9399351a42e7F3dC6d988912988ec1ACC0cA",
                        CrossChainBridge: "0x812C613477558337698eD2fb4e7ef91945402353",
                        UniversalAssetManager: "0x4D1E48C190E2A066A646731F37245365011c0ec2",
                        ConfidentialYieldProtocol: "0xeEa3FdB0256C92b67955b96a08E397A53FBA8c05"
                    },
                    baseSepolia: {
                        MockFHE: "0x4D1E48C190E2A066A646731F37245365011c0ec2",
                        CrossChainBridge: "0xeEa3FdB0256C92b67955b96a08E397A53FBA8c05",
                        UniversalAssetManager: "0xE6322835dacb2a18CC318683090Df639199fCA94",
                        ConfidentialYieldProtocol: "0x1c63Ad304B21b0923e0CCe869a747b6dc4a90D0a"
                    }
                };
                
                // Network configurations with correct RPC URLs
                this.networkConfigs = {
                    sepolia: {
                        chainId: 11155111,
                        rpcUrl: "https://sepolia.infura.io/v3/9aa3d95b3bc440fa88ea12eaa4456161",
                        blockExplorer: "https://sepolia.etherscan.io",
                        name: "Ethereum Sepolia"
                    },
                    arbitrumSepolia: {
                        chainId: 421614,
                        rpcUrl: "https://sepolia-rollup.arbitrum.io/rpc",
                        blockExplorer: "https://sepolia.arbiscan.io",
                        name: "Arbitrum Sepolia"
                    },
                    baseSepolia: {
                        chainId: 84532,
                        rpcUrl: "https://sepolia.base.org",
                        blockExplorer: "https://sepolia.basescan.org",
                        name: "Base Sepolia"
                    }
                };
            }

            // Initialize connection to MetaMask
            async initialize() {
                if (typeof window.ethereum === 'undefined') {
                    throw new Error('MetaMask not detected. Please install MetaMask.');
                }

                this.provider = new ethers.providers.Web3Provider(window.ethereum);
                this.signer = this.provider.getSigner();

                // Get current network
                const network = await this.provider.getNetwork();
                this.currentNetwork = this.getNetworkName(network.chainId);

                return {
                    address: await this.signer.getAddress(),
                    network: this.currentNetwork,
                    contracts: this.contractAddresses[this.currentNetwork] || {}
                };
            }

            // Get network name from chain ID
            getNetworkName(chainId) {
                const networks = {
                    11155111: 'sepolia',
                    421614: 'arbitrumSepolia',
                    84532: 'baseSepolia'
                };
                return networks[chainId] || 'unknown';
            }

            // Get current network info
            async getNetworkInfo() {
                const network = await this.provider.getNetwork();
                return {
                    chainId: network.chainId,
                    name: this.getNetworkName(network.chainId),
                    contracts: this.contractAddresses[this.getNetworkName(network.chainId)] || {}
                };
            }
        }

        // Global client instance
        window.quantumClient = new QuantumDeFiClient();
    </script>
</body>

</html>